{"version":3,"file":"ng-simple-carousel.umd.js","sources":["../../../projects/ng-simple-carousel/src/lib/carousel.component.ts","../../../projects/ng-simple-carousel/src/lib/carousel.controller.ts","../../../projects/ng-simple-carousel/src/lib/with-button/with-button.component.ts","../../../projects/ng-simple-carousel/src/lib/with-dots/with-dots.component.ts","../../../projects/ng-simple-carousel/src/lib/carousel.module.ts","../../../projects/ng-simple-carousel/src/public-api.ts","../../../projects/ng-simple-carousel/src/ng-simple-carousel.ts"],"sourcesContent":["/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { AfterViewInit, Component, ElementRef, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild } from '@angular/core';\nimport { BehaviorSubject, Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { CarouselController } from './carousel.controller';\n\nexport interface CarouselImage {\n  id: string;\n  src: string;\n  alt?: string;\n  /**\n   * [For Responsive Image]{@link https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images}\n   */\n  srcset?: string;\n  /**\n   * [For Responsive Image]{@link https://developer.mozilla.org/en-US/docs/Learn/HTML/Multimedia_and_embedding/Responsive_images}\n   */\n  sizes?: string;\n  sources?: CarouselImageSource[];\n}\n\n/**\n * [For source in picture element]{@link https://developer.mozilla.org/ja/docs/Web/HTML/Element/picture}\n */\nexport interface CarouselImageSource {\n  srcset: string;\n  type?: string;\n  sizes?: string;\n}\n\n@Component({\n  selector: 'ng-simple-carousel',\n  templateUrl: './carousel.html',\n  styleUrls: ['./carousel.scss']\n})\nexport class NgSimpleCarouselComponent implements OnInit, OnDestroy, AfterViewInit {\n  @ViewChild('container') containerEl: ElementRef;\n  @Input() controller: CarouselController;\n  @Input() images: CarouselImage[];\n  @Input() objectFit: 'contain' | 'cover' = 'contain';\n  // @Input() infinite = false;\n  @Output() imgChange: EventEmitter<string> = new EventEmitter();\n  activeIndex = 0;\n  observer: IntersectionObserver;\n  scroll$ = new BehaviorSubject(false);\n  destroy$ = new Subject<void>();\n\n  constructor() { }\n\n  ngOnInit(): void {\n    this.controller.jump$.pipe(takeUntil(this.destroy$)).subscribe(id => this.jumpTo(id));\n    this.controller.action$.pipe(takeUntil(this.destroy$)).subscribe(action => action === 'prev' ? this.onPrev() : this.onNext());\n  }\n\n  ngAfterViewInit() {\n    this.initObserve();\n    this.startObserve();\n  }\n\n  initObserve() {\n    const rootEl = this.containerEl.nativeElement as HTMLElement;\n    const options = {\n      root: rootEl,\n      rootMargin: '0px -50%',\n    };\n    this.observer = new IntersectionObserver((entries, observer) => {\n      entries.forEach(entry => {\n        if (entry.isIntersecting) {\n          const activeId = entry.target.id;\n          const newInd = this.images.findIndex(img => img.id === activeId)\n          this.onImgChange(activeId, newInd);\n        }\n      });\n    }, options);\n  }\n\n  startObserve() {\n    const rootEl = this.containerEl.nativeElement as HTMLElement;\n    Array.from(rootEl.children).forEach(img => this.observer.observe(img));\n  }\n\n  stopObserve() {\n    this.observer.disconnect();\n  }\n\n  // Observer will call onImgChange()\n  jumpTo(id: string) {\n    const newInd = this.images.findIndex(img => img.id === id);\n    if (this.activeIndex === newInd) { return; }\n    const rootEl = this.containerEl.nativeElement as HTMLElement;\n    rootEl.scrollTo({\n      top: 0,\n      left: rootEl.offsetWidth * newInd,\n      behavior: 'smooth'\n    });\n  }\n\n  onPrev() {\n    let newId;\n    if (this.activeIndex - 1 >= 0) { newId = this.images[this.activeIndex - 1].id; }\n    // if (this.infinite && this.activeIndex - 1 < 0) { newId = this.images[this.images.length - 1].id; }\n    if (newId) { this.jumpTo(newId); }\n  }\n\n  onNext() {\n    let newId;\n    if (this.activeIndex + 1 < this.images.length) { newId = this.images[this.activeIndex + 1].id; }\n    // if (this.infinite && this.activeIndex + 1 > this.images.length - 1) { newId = this.images[0].id; }\n    if (newId) { this.jumpTo(newId); }\n  }\n\n  onImgChange(id: string, index: number) {\n    if (this.activeIndex === index) { return; }\n    this.activeIndex = index;\n    this.imgChange.emit(id);\n  }\n\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n    this.stopObserve();\n  }\n\n}\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Subject } from \"rxjs\";\n\nexport class CarouselController {\n  private jumpSub: Subject<string> = new Subject<string>();\n  jump$ = this.jumpSub.asObservable();\n  private actionSub: Subject<'prev' | 'next'> = new Subject<'prev' | 'next'>();\n  action$ = this.actionSub.asObservable();\n\n  constructor() {\n  }\n\n  jumpTo(id: string) {\n    this.jumpSub.next(id);\n  }\n\n  prev() {\n    this.actionSub.next('prev');\n  }\n\n  next() {\n    this.actionSub.next('next');\n  }\n\n}\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { CarouselImage } from './../carousel.component';\nimport { CarouselController } from './../carousel.controller';\n\n@Component({\n  selector: 'ng-simple-carousel-with-button',\n  templateUrl: './with-button.component.html',\n  styleUrls: ['./with-button.component.scss']\n})\nexport class NgSimpleCarouselWithButtonComponent implements OnInit {\n  @Input() controller: CarouselController;\n  @Input() images: CarouselImage[];\n  @Input() objectFit: 'contain' | 'cover';\n  // @Input() infinite = false;\n  @Output() imgChange: EventEmitter<string> = new EventEmitter();\n  isFirstImg = true;\n  isLastImg = false;\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  onPrev() {\n    this.controller.prev();\n  }\n\n  onNext() {\n    this.controller.next();\n  }\n\n  onImgChange(id: string) {\n    if (id === this.images[0].id) {\n      this.isFirstImg = true;\n      this.isLastImg = false;\n    } else if (id === this.images[this.images.length - 1].id) {\n      this.isFirstImg = false;\n      this.isLastImg = true;\n    } else {\n      this.isFirstImg = false;\n      this.isLastImg = false;\n    }\n    this.imgChange.emit(id);\n  }\n}\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\nimport { CarouselImage } from './../carousel.component';\nimport { CarouselController } from './../carousel.controller';\n\n@Component({\n  selector: 'ng-simple-carousel-with-dots',\n  templateUrl: './with-dots.component.html',\n  styleUrls: ['./with-dots.component.scss']\n})\nexport class NgSimpleCarouselWithDotsComponent implements OnInit {\n  @Input() controller: CarouselController;\n  @Input() images: CarouselImage[];\n  @Input() objectFit: 'contain' | 'cover';\n  // @Input() infinite = false;\n  @Output() imgChange: EventEmitter<string> = new EventEmitter();\n  activeId;\n\n  constructor() { }\n\n  ngOnInit(): void {\n    this.activeId = this.images[0].id;\n  }\n\n  onImgChange(id: string) {\n    this.activeId = id;\n    this.imgChange.emit(id);\n  }\n\n  onDotsClick(id: string) {\n    this.controller.jumpTo(id);\n  }\n}\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NgSimpleCarouselComponent } from './carousel.component';\nimport { NgSimpleCarouselWithButtonComponent } from './with-button/with-button.component';\nimport { NgSimpleCarouselWithDotsComponent } from './with-dots/with-dots.component';\n\n@NgModule({\n  declarations: [NgSimpleCarouselComponent, NgSimpleCarouselWithButtonComponent, NgSimpleCarouselWithDotsComponent],\n  imports: [\n    CommonModule\n  ],\n  exports: [NgSimpleCarouselComponent, NgSimpleCarouselWithButtonComponent, NgSimpleCarouselWithDotsComponent]\n})\nexport class NgSimpleCarouselModule { }\n","/**\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/*\n * Public API Surface of ng-simple-carousel\n */\n\nexport * from './lib/carousel.component';\nexport * from './lib/carousel.controller';\nexport * from './lib/carousel.module';\n\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {NgSimpleCarouselWithButtonComponent as ɵa} from './lib/with-button/with-button.component';\nexport {NgSimpleCarouselWithDotsComponent as ɵb} from './lib/with-dots/with-dots.component';"],"names":["EventEmitter","BehaviorSubject","Subject","takeUntil","Component","ViewChild","Input","Output","NgModule","CommonModule"],"mappings":"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"}